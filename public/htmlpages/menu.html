<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="shortcut icon" href="../images/logo.jpg" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/d-style.css">
    <link rel="stylesheet" href="../css/menu.css">
</head>

<body>
    <!-- JQuery -->
    <script src="../js/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="../js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../js/dashboard.js"></script>

    <div class="dash-menu">

        <div class="brand-div">
            <img class="brand-logo" src="" alt="Logo" width="40" height="40">
            <div class="dark-mode-button form-check form-switch">
                <input class="form-check-input check" type="checkbox" role="switch" id="flexSwitchCheckDefault"
                    onchange="toggleTheme()">
            </div>
        </div>

        <div class="profile-panel">
            <img id="display-picture" src="../images/hatim.png" alt="" height="100px">
            <p class="profile-name">Hatim Haider Ali</p>
            <p class="profile-designation">Admin</p>
        </div>
        <button onclick="home()" class="menu-btn"><img src="../images/home-icon.png" alt=""
                height="20px">Dashbord</button>
        <button onclick="doctors()" class="menu-btn"><img src="../images/doctor.svg" alt=""
                height="20px">Doctor</button>
        <button onclick="patients()" class=""><img src="../images/patient.png" alt="" height="20px">Patient</button>
        <button onclick="appointment()" class="menu-btn"><img src="../images/appointments.svg" alt=""
                height="20px">Appointment</button>
        <button onclick="pharmacy()" class="menu-btn"><img src="../images/pharmacy.png" alt=""
                height="20px">Pharmacy</button>
        <button class="menu-btn" onclick="loadSettingsModal()" data-bs-toggle="modal" data-bs-target="#settingModal">
            <img src="../images/settings.png" alt="" height="20px">Settings
        </button>

    </div>

    <script>
        // Function to load settings modal content
        function loadSettingsModal() {
            // Load modal content from external file into the parent document
            parent.$("#modalContainer").load("settings-modal.html", function () {
                // After content is loaded, show the modal
                parent.$("#settingModal").modal("show");
            });
        }

        // For all pages
        function home() {
            parent.window.location.href = './dashboard.html';
            var btn = document.querySelector('.menu-btn');
            btn.classList.add('active')
        }
        function doctors() {
            parent.window.location.href = './doctors.html';
        }

        function patients() {
            parent.window.location.href = './patients.html';
        }

        function pharmacy() {
            parent.window.location.href = './pharmacy.html';
        }

        function appointment() {
            parent.window.location.href = './appointment.html';
        }
        // !!!

        function storeImageSourceToLocal() {

            var imageElement = document.getElementById('display-picture');
            var autoChangeDpElement = parent.document.getElementById('auto-change-dp');

            if (imageElement) {
                var imageSource = imageElement.getAttribute('src');
                localStorage.setItem('imageSource', imageSource);
                autoChangeDpElement.setAttribute('src', imageSource);
                console.log("image src: " + imageSource);
            } else {
                console.error("Image element with id 'display-picture' not found.");
            }
        }

        window.onload = function () {
            storeImageSourceToLocal();
        };
    </script>

</body>

</html>